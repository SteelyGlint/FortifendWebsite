@use "sass:color";
@use 'sass:math' as math;
@use 'fonts' as *;
@use "sass:map" as map;
@use "sass:list" as list;



// Variables
$header-font: 'Silkscreen', 'Press Start 2P', monospace;
$body-font: 'Silkscreen', 'monaco';
$description-font:  'Roboto Condensed', -apple-system, BlinkMacSystemFont, sans-serif;
$accent-color: #9eff4a; // Adjusted to a softer yellow-green that matches the monster

$text-light: #FFFFFF;
$card-bg: rgba(0, 0, 0, 0.45);
$border-radius: 8px;
$page-bg: #2b222a;



// Base styles
html {
  font-size: 16px;
  min-width: 100vw;
  margin: 0;
  padding: 0;
  background-color: $page-bg;

  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  overflow-x: hidden; /* Prevent horizontal scrolling */
}

body {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;

  margin: 0;
  padding: 0;
  font-size: clamp(2rem, 5vw, 4rem);
  line-height: 1.0;
  font-family: $body-font;
  font-weight: normal;
  color: $text-light;
  margin: 0px auto;
  width: 100%;
  max-width: 100vw;

  letter-spacing: 0rem;
  overflow-x: hidden; /* Hide horizontal overflow */
  box-sizing: border-box; /* Include padding in width calculation */
}

//
html, body {
  // Prevent viewport height changes from affecting layout
  //height: 100%;
  overflow-x: hidden;

}

// Typography
h1, h2, h3, h4, h5, h6 {
  line-height: 1;
  text-rendering: geometricPrecision;
  font-smooth: never;
  -webkit-font-smoothing: none;
  margin-top: 0;
  margin-bottom: 2rem;
  font-weight: normal;
  color: $text-light;
  letter-spacing: 0rem;

}

h1, h2, h3 {
  font-family: $header-font;
  @include roboto-light;
  font-size: 64px;
  line-height: 1.6;
  color: #f0f0f0;

  // Create appropriate spacing consistent with your design
  margin: 2em 0;

  // Slightly increase letter-spacing for better readability on dark backgrounds
  letter-spacing: 0.2px;


  @media (max-width: 768px) {
    font-size: 32px;
  }
}

h4, h5, h6 {
  font-family: $description-font;
  @include roboto-light;
  font-size: 32px;
  line-height: 1.6;
  color: #f0f0f0;

  // Create appropriate spacing consistent with your design
  margin: 2em 0;

  // Slightly increase letter-spacing for better readability on dark backgrounds
  letter-spacing: 0.2px;


  @media (max-width: 768px) {
    font-size: 16px;
  }
}

//
//h1 { font-size: 6rem; line-height: 1.0; letter-spacing: 0rem; }
//h2 { font-size: 6rem; line-height: 1.0; letter-spacing: 0rem; }
//h3 { font-size: 5rem; line-height: 1.0; letter-spacing: 0rem; }
//h4 { font-size: 5rem; line-height: 1.0; letter-spacing: 0rem; }
//h5 { font-size: 3rem; line-height: 1.0; letter-spacing: 0rem; }
//h6 { font-size: 3rem; line-height: 1.0; letter-spacing: 0rem; }




header {
  margin-bottom: 25px;
  display: flex;
  flex-direction: column;
  align-items: center;
  box-sizing: border-box;
  overflow: hidden;
}
footer {
  background: $card-bg;
  margin-bottom: 25px;
  width: 100%;
  max-width: 100vw;
  box-sizing: border-box;
  overflow: hidden;
}

// Links
a {
  font-weight: normal;
  text-decoration: none;
  color: $accent-color;

  &:focus {
    outline: thin dotted;
    color: color.adjust($accent-color, $lightness: 10%);
  }
}

// Marketing section styling
.marketing-content {
  //background: $card-bg;
  padding: 25px;
  margin-bottom: 25px;
  border-radius: $border-radius;
}

.tagline {
  @include roboto-light;
  line-height: 1.0;
  letter-spacing: 0.0rem;
  margin-bottom: 20px;
  color: $accent-color;
}

.cta-button {
  margin-top: 20px;
  padding: 10px 20px;
  background-color: $accent-color;
  color: #000;
  border-radius: 4px;
  display: inline-block;
  transition: background-color 0.3s ease;

  &:hover {
    background-color: color.adjust($accent-color, $lightness: -20%);
  }
}


/* Keep your original CSS exactly as is */
.cropped-image {
  margin: 0px;
  padding: 0px;
  width: 100%; /* Container width */
  height: 300px; /* Fixed height */
  //height: 100vh; /* Fixed height */
  overflow: hidden; /* Hide parts outside container */
  /* NO position: relative here */
  //position: relative;


  ///* Safari-specific orientation change fix */
  //@supports (-webkit-touch-callout: none) {
  //  width: 100vw; /* Use viewport width instead of percentage */
  //  margin-left: calc(-50vw + 50%); /* Center relative to the body */
  //  box-sizing: border-box;
  //}
}

.cropped-image img {
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
  -ms-interpolation-mode: nearest-neighbor; /* IE */
  /* Center the image horizontally */
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  /* Optional: adjust vertical position */
  top: 0;
  max-width: none;     /* IMPORTANT: Prevents the image from resizing to fit container */

  //width: auto;
  //
  /* Set minimum width to ensure coverage on large screens */
  min-width: 100vw; /* Always fill viewport width */
  height: auto; /* Let height adjust based on aspect ratio */
  min-height: 100vh; /* Make sure it fills the container height */  /* broken on android */


  /* Position from the top for better framing */
  top: 0;
  z-index: -1; /* Place behind all other content */

  /* Add object-fit as a fallback for browsers that support it */
  object-fit: cover;
  object-position: center top;

  /* Mobile-specific adjustments */
  @media (max-width: 768px) {
    width: 100%;
    height: 100%;
    max-width: 100%; /* Prevent overflow */
  }
  //
  ///* Android Chrome specific rules */
  //@media screen and (-webkit-min-device-pixel-ratio: 0) and (min-resolution: 0.001dpcm) {
  //  transform: translateZ(0); /* Enable hardware acceleration */
  //  backface-visibility: hidden;
  //}

  /* Safari-specific fix */
  @supports (-webkit-touch-callout: none) {
    object-fit: cover;
    object-position: top center;
  }

  /* Add Safari-specific orientation change fix */
  @supports (-webkit-touch-callout: none) {
    /* Ensure image covers the full width during rotation */
    min-width: 100vw;
    object-fit: cover;
    object-position: top center;
  }
}


/* Add media query for extra large displays */
@media (min-width: 2400px) {
  .cropped-image img {
    /* Scale up for extremely large monitors */
    min-width: 100%; /* Use container width */
    width: 100vw; /* Ensure viewport coverage */
    max-width: none; /* Override max-width limitations */
  }
}

/* Add only these Safari-specific fixes */
@supports (-webkit-touch-callout: none) {
  /* Only fix the container horizontal overflow in Safari */
  header, #header {
    //max-width: 100vw;
    //overflow-x: hidden;
  }
}

// Define aspect ratio breakpoints
$aspect-ratios: (
        "ultrawide": (21, 9),  // 21:9 ultrawide monitors
        "wide": (16, 9),       // 16:9 standard widescreen
        "standard": (4, 3),    // 4:3 standard monitor
        "square": (1, 1),      // Square viewport (rare)
        "portrait": (9, 16),   // Portrait smartphone/tablet
        "tall": (3, 4)         // Tall viewport
);

// Define height scales for different aspect ratios
$height-scales: (
        "ultrawide": 40vh,
        "wide": 35vh,
        "standard": 30vh,
        "square": 28vh,
        "portrait": 25vh,
        "tall": 22vh
);

// Define object-position adjustments for different ratios
$vertical-positions: (
        "ultrawide": 25%,
        "wide": 30%,
        "standard": 35%,
        "square": 40%,
        "portrait": 45%,
        "tall": 50%
);

// Banner position adjustments
$banner-positions: (
        "ultrawide": 90%,
        "wide": 85%,
        "standard": 80%,
        "square": 75%,
        "portrait": 70%,
        "tall": 65%
);

// Generate aspect ratio media queries
@each $name, $ratio in $aspect-ratios {
  $width: list.nth($ratio, 1);
  $height: list.nth($ratio, 2);

  // Generate min-aspect-ratio queries
  @media (min-aspect-ratio: #{$width}/#{$height}) {
    .cropped-image {
      height: map.get($height-scales, $name);

      img {
        object-position: center map.get($vertical-positions, $name);
      }
    }

    .banner-container {
      top: map.get($banner-positions, $name);
    }
  }
}

// Combine with device width for more specific targeting
$device-breakpoints: (
        "desktop": 1200px,
        "tablet": 768px,
        "mobile": 480px
);

// Nested loop for device width + aspect ratio
@each $device, $width in $device-breakpoints {
  @each $ratio-name, $ratio in $aspect-ratios {
    $ratio-width: list.nth($ratio, 1);
    $ratio-height: list.nth($ratio, 2);

    // More specific media queries
    @if $device == "mobile" {
      @media (max-width: $width) and (max-aspect-ratio: #{$ratio-width}/#{$ratio-height}) {
        .cropped-image {
          // Adjust for mobile + specific aspect ratio
          height: map.get($height-scales, $ratio-name) * 0.8;
        }
      }
    } @else {
      @media (min-width: $width) and (min-aspect-ratio: #{$ratio-width}/#{$ratio-height}) {
        .cropped-image {
          // Adjustments for larger devices with specific aspect ratios
          height: map.get($height-scales, $ratio-name) * 1.1;
        }
      }
    }
  }
}

// Additional loop for handling pixel scaling at different viewport sizes
$scale-factors: (1, 2, 3, 4);
$pixel-breakpoints: (
        "xs": 480px,
        "sm": 768px,
        "md": 1024px,
        "lg": 1440px
);

@each $breakpoint-name, $breakpoint-value in $pixel-breakpoints {
  @media (min-width: $breakpoint-value) {
    @each $scale in $scale-factors {
      // Only use appropriate scales for each breakpoint
      @if ($breakpoint-name == "xs" and $scale <= 2) or
          ($breakpoint-name == "sm" and $scale <= 3) or
          ($breakpoint-name == "md") or
          ($breakpoint-name == "lg" and $scale >= 2) {

        .pixel-art-#{$breakpoint-name}-#{$scale}x {
          image-rendering: pixelated;
          image-rendering: -moz-crisp-edges;
          image-rendering: crisp-edges;
          transform: scale($scale);
          transform-origin: 0 0;
        }
      }
    }
  }
}

// Debugging helper classes with loop
$debug-colors: (
        "outline": rgba(255, 0, 0, 0.5),
        "background": rgba(0, 255, 0, 0.1),
        "border": rgba(0, 0, 255, 0.8)
);

@each $name, $color in $debug-colors {
  .debug-#{$name} {
    @if $name == "outline" {
      outline: 2px solid $color !important;
    } @else if $name == "background" {
      background-color: $color !important;
    } @else if $name == "border" {
      border: 1px solid $color !important;
    }
  }
}



.banner-container {
  //position: absolute;
  //top: 85%;
  margin: 0px;
  padding: 0px;
  //width: 100px; /* Container width */
  width: 100%;
  //max-width: 2400px; // Increased for large monitors
  margin: 0 auto;
}

/* Refactor your banner-image class in main.scss */
.banner-image {
  /* Keep existing pixel-perfect rendering properties */
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
  -ms-interpolation-mode: nearest-neighbor; /* IE */

  /* Center the image */
  display: block;
  margin: 0 auto;

  /* Don't set max-width to allow for exact integer scaling */
  /* max-width: 100%; */ /* Remove this line */
  height: auto;

  /* Keep transform origin */
  transform-origin: center;

  /* Keep your original styles */
  border-radius: $border-radius $border-radius 0 0;

  /* Add Safari-specific rendering */
  @supports (-webkit-touch-callout: none) {
    transform: translateZ(0); /* Helps with Safari rendering */
  }
}

.image-placeholder {
  //margin-top: calc(100vh * 0.3552 + 47.6051px);
  margin-bottom: 450px; /* More specific and forceful for testing */

  @media (min-width: 2001px) { // 4 items per row for very large screens
    margin-bottom: 1850px;
  }

  @media (min-width: 1501px) and (max-width: 2000px) { // 3 items per row
    margin-bottom: 1650px;
  }

  @media (min-width: 769px) and (max-width: 1500px) { // 2 items per row
    margin-bottom: 1650px;
  }

  @media (max-width: 768px) {
    margin-bottom: 425px;
  }

}

// Content sections
.content {
  background: $card-bg;
  padding: 25px 25px 25px 25px;
  margin-bottom: 25px;
  border-radius: $border-radius;
  display: flex;
  justify-content: center;
  align-items: center;
}

.video-background {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 50vw;
}

#fullpage {
  display: none;
  position: fixed;
  z-index: 9998;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.85); /* Add overlay background */
  opacity: 0;
  transition: opacity 0.3s ease-in-out;

  .fullpage-image {
    width: 90%; /* Reduced from 100% to create margin */
    height: 90%; /* Reduced from 100% to create margin */
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center center;
    background-color: transparent;
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
    //transform: scale(1); /* Integer scaling for pixel art */
    transform-origin: center center;
    margin: 5vh auto; /* Add vertical and horizontal margin */
  }
}

// Gallery styles
.gallery-container {
  width: 100%;
  //max-width: 2400px; // Increased for large monitors
  margin: 0 auto;
}

.artwork-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;

  // Create a proper grid layout
  @media (min-width: 2001px) { // 4 items per row for very large screens
    .artwork-item {
      //background: color.adjust($card-bg, $alpha: 0.9);
      flex: 0 0 calc(25% - 15px);
      max-width: calc(25% - 15px);
    }
  }

  @media (min-width: 1501px) and (max-width: 2000px) { // 3 items per row
    .artwork-item {
      //background: color.adjust($card-bg, $alpha: 0.9);
      flex: 0 0 calc(33.333% - 14px);
      max-width: calc(33.333% - 14px);
    }
  }

  @media (min-width: 764px) and (max-width: 1500px) { // 2 items per row
    .artwork-item {
      //background: color.adjust($card-bg, $alpha: 0.9);
      flex: 0 0 calc(50% - 10px);
      max-width: calc(50% - 10px);
    }
  }
}

.artwork-item {
  border-radius: $border-radius;
  box-shadow: 0 4px 12px color.adjust($card-bg, $alpha: -0.5);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  overflow: hidden;
  margin-bottom: 20px;
  position: relative;
  display: inline-block;

  img {
    object-fit: contain;
    width: 100%;
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
    border-radius: $border-radius $border-radius 0 0;
    display: block;
    height: auto;
    //aspect-ratio: 1920/1080;
    //@media (max-width: 768px) {
    //  height: 300px;
    //}
  }

  // Default (mobile) styling
  @media (max-width: 768px) {
    flex: 0 0 100%;
    max-width: none;
  }

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 16px color.adjust($card-bg, $alpha: -0.4);
    background: color.adjust($card-bg, $alpha: 0);
  }
}

.artwork-info {
  position: relative;
  background-color: #3c3f41;
  font-size: 2.4rem;
  color: #fff;
  padding: 10px 20px;
  text-align: center;

  .artwork-title {
    margin: 0 0 15px 0;
    color: $text-light;
    color: color.adjust($text-light, $alpha: -0.15);
  }

  .artwork-description {
    display: none;
    color: color.adjust($text-light, $alpha: -0.15);
  }
}

.icon-image {
  height: 100px;
  width: 100%;
  object-fit: fill;
  border-radius: $border-radius $border-radius 0 0;
  filter: invert(28%) sepia(79%) saturate(2476%) hue-rotate(56deg) brightness(118%) contrast(119%);
}

.icon-item {
  .icon-info {
    padding: 10px;
    margin-right: 10px;

    .icon-title {
      font-size: 2.4rem;
      margin: 0 0 10px 0;
      color: $text-light;
    }

    .icon-description {
      font-size: 2.4rem;
      color: color.adjust($text-light, $alpha: -0.15);
      line-height: 1.2;
      text-align: center;
    }
  }
}

// In your SCSS file
.video-placeholder {
  background-color: #111;
  background-position: center;
  background-size: cover;
  width: 100%;
  height: 0;
  padding-bottom: 56.25%; // 16:9 aspect ratio
  position: relative;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;

  // Add a subtle pulsing effect to encourage clicking
  &:hover .play-button {
    transform: scale(1.1);
  }

  p {
    margin-top: 10px;
    color: white;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
  }
}

.play-button {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 60px;
  height: 60px;
  background-color: rgba(0,0,0,0.6);
  border-radius: 50%;
  color: white;
  font-size: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.2s ease;
}

.video-container {
  width: 100%;

  video {
    width: 100%;
    height: auto;
    display: block;
  }
}


// Blockquote styles
blockquote {
  border-left: 2px solid color.adjust($accent-color, $saturation: 10%);
  margin: 1.6em 0;
  padding: 1.5em;
  font-size: 1.8rem;
  background: color.adjust($card-bg, $alpha: -0.4);
  border-radius: $border-radius;

  p:last-child {
    margin-bottom: 0;
  }
}


//body::after {
//  content: '';
//  position: fixed;
//  top: 0;
//  left: 0;
//  width: 100%;
//  height: 100%;
//  background-image:
//          linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),
//          linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);
//  background-size: 10px 10px; /* Adjust grid size as needed */
//  pointer-events: none;
//  z-index: 9999;
//}
//
///* Basic Grid Helper - Guaranteed to work */
///* High Contrast Grid Helper - Optimized for dark backgrounds */
//body.show-grid {
//  /* 10px grid with high-visibility light lines */
//  background-image:
//          /* Horizontal lines */
//          linear-gradient(to bottom, transparent 9px, rgba(255, 255, 255, 0.25) 1px),
//            /* Vertical lines */
//          linear-gradient(to right, transparent 9px, rgba(255, 255, 255, 0.25) 1px),
//            /* 100px grid with colored accent lines */
//          linear-gradient(to bottom, transparent 99px, rgba(64, 224, 208, 0.5) 1px),
//          linear-gradient(to right, transparent 99px, rgba(64, 224, 208, 0.5) 1px);
//  background-size:
//          10px 10px,
//          10px 10px,
//          100px 100px,
//          100px 100px;
//}
//
///* Alternate version with brighter colors if needed */
//body.show-grid-bright {
//  background-image:
//          /* 10px grid */
//          linear-gradient(to bottom, transparent 9px, rgba(255, 255, 255, 0.35) 1px),
//          linear-gradient(to right, transparent 9px, rgba(255, 255, 255, 0.35) 1px),
//            /* 100px grid */
//          linear-gradient(to bottom, transparent 99px, rgba(255, 215, 0, 0.6) 1px),
//          linear-gradient(to right, transparent 99px, rgba(255, 215, 0, 0.6) 1px);
//  background-size:
//          10px 10px,
//          10px 10px,
//          100px 100px,
//          100px 100px;
//}
//
//
//
//* {
//  .cropped-image {
//    outline: 2px dashed hotpink !important;
//  }
//  border: 1px solid white !important;
//}
